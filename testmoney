dmFyIGRlZmF1bHRfbnVtYmVycyA9ICcgaGFpIGJhIGLhu5FuIG7Eg20gc8OhdSBi4bqjeSB0w6FtIGNow61uJzsNCnZhciB1bml0cyA9ICgnMSBt4buZdCcgKyBkZWZhdWx0X251bWJlcnMpLnNwbGl0KCcgJyk7DQp2YXIgY2ggPSAnbOG6uyBtxrDhu51pJyArIGRlZmF1bHRfbnVtYmVyczsNCnZhciB0ciA9ICdraMO0bmcgbeG7mXQnICsgZGVmYXVsdF9udW1iZXJzOw0KdmFyIHRyYW0gPSB0ci5zcGxpdCgnICcpOw0KdmFyIHUgPSAnMiBuZ2jDrG4gdHJp4buHdSB04buJJy5zcGxpdCgnICcpOw0KdmFyIGNodWMgPSBjaC5zcGxpdCgnICcpOw0KDQovKioNCiAqIENsYXNzIGNo4bupYSBjw6FjIGZ1bmN0aW9uIGTDuW5nIGNodW5nIGNobyBo4buHIHRo4buRbmcgcGjDrWEgY2xpZW50DQogKi8NCmNsYXNzIE1vbmV5Rm9ybWF0IHsNCiAgICAvKioNCiAgICAgKiBhZGRpdGlvbmFsIHdvcmRzIA0KICAgICAqIEBwYXJhbSAge1t0eXBlXX0gYSBbZGVzY3JpcHRpb25dDQogICAgICogQHJldHVybiB7W3R5cGVdfSAgIFtkZXNjcmlwdGlvbl0NCiAgICAgKi8NCiAgICB0ZW50aChhKSB7DQogICAgICAgIHZhciBzbDEgPSB1bml0c1thWzFdXTsNCiAgICAgICAgdmFyIHNsMiA9IGNodWNbYVswXV07DQogICAgICAgIHZhciBhcHBlbmQgPSAnJzsNCiAgICAgICAgaWYgKGFbMF0gPiAwICYmIGFbMV0gPT0gNSkNCiAgICAgICAgICAgIHNsMSA9ICdsxINtJzsNCiAgICAgICAgaWYgKGFbMF0gPiAxKSB7DQogICAgICAgICAgICBhcHBlbmQgPSAnIG3GsMahaSc7DQogICAgICAgICAgICBpZiAoYVsxXSA9PSAxKQ0KICAgICAgICAgICAgICAgIHNsMSA9ICcgbeG7kXQnOw0KICAgICAgICB9DQogICAgICAgIHZhciBzdHIgPSBzbDIgKyAnJyArIGFwcGVuZCArICcgJyArIHNsMTsNCiAgICAgICAgcmV0dXJuIHN0cjsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiBjb252ZXJ0IG51bWJlciBpbiBibG9ja3Mgb2YgMyANCiAgICAgKiBAcGFyYW0gIHtbdHlwZV19IGQgW2Rlc2NyaXB0aW9uXQ0KICAgICAqIEByZXR1cm4ge1t0eXBlXX0gICBbZGVzY3JpcHRpb25dDQogICAgICovDQogICAgYmxvY2tfb2ZfdGhyZWUoZCkgew0KICAgICAgICBsZXQgX2EgPSBkICsgJyc7DQogICAgICAgIGlmIChkID09ICcwMDAnKSByZXR1cm4gJyc7DQogICAgICAgIHN3aXRjaCAoX2EubGVuZ3RoKSB7DQogICAgICAgICAgICBjYXNlIDA6DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KDQogICAgICAgICAgICBjYXNlIDE6DQogICAgICAgICAgICAgICAgcmV0dXJuIHVuaXRzW19hXTsNCg0KICAgICAgICAgICAgY2FzZSAyOg0KICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRlbnRoKF9hKTsNCg0KICAgICAgICAgICAgY2FzZSAzOg0KICAgICAgICAgICAgICAgbGV0ICBzbDEyID0gJyc7DQogICAgICAgICAgICAgICAgaWYgKF9hLnNsaWNlKDEsIDMpICE9ICcwMCcpDQogICAgICAgICAgICAgICAgICAgIHNsMTIgPSB0aGlzLnRlbnRoKF9hLnNsaWNlKDEsIDMpKTsNCiAgICAgICAgICAgICAgICBsZXQgc2wzID0gdHJhbVtfYVswXV0gKyAnIHRyxINtJzsNCiAgICAgICAgICAgICAgICByZXR1cm4gc2wzICsgJyAnICsgc2wxMjsNCiAgICAgICAgfQ0KICAgIH0NCiAgICAvKioNCiAgICAgKiBHZXQgbnVtYmVyIGZyb20gdW5pdCwgdG8gc3RyaW5nDQogICAgICogQHBhcmFtICB7bWl4ZWR9IG5TdHIgaW5wdXQgbW9uZXkNCiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9ICBtb25leSBzdHJpbmcsIHJlbW92ZWQgZGlnaXRzDQogICAgICovDQogICAgZm9ybWF0bnVtYmVyKG5TdHIpIHsNCiAgICAgICAgblN0ciArPSAnJzsNCiAgICAgICAgdmFyIHggPSBuU3RyLnNwbGl0KCcuJyk7DQogICAgICAgIHZhciB4MSA9IHhbMF07DQogICAgICAgIHZhciB4MiA9IHgubGVuZ3RoID4gMSA/ICcuJyArIHhbMV0gOiAnJzsNCiAgICAgICAgdmFyIHJneCA9IC8oXGQrKShcZHszfSkvOw0KICAgICAgICB3aGlsZSAocmd4LnRlc3QoeDEpKSB7DQogICAgICAgICAgICB4MSA9IHgxLnJlcGxhY2Uocmd4LCAnJDEnICsgJywnICsgJyQyJyk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHgxICsgeDI7DQogICAgfTsNCg0KICAgIHRvX3ZpZXRuYW1lc2Uoc3RyLCBjdXJyZW5jeSkgew0KICAgICAgICB2YXIgc3RyID0gcGFyc2VJbnQoc3RyKSArICcnOw0KICAgICAgICAvL3N0cj1maXhDdXJyZW5jeShhLDEwMDApOw0KICAgICAgICB2YXIgaSA9IDA7DQogICAgICAgIHZhciBhcnIgPSBbXTsNCiAgICAgICAgdmFyIGluZGV4ID0gc3RyLmxlbmd0aDsNCiAgICAgICAgdmFyIHJlc3VsdCA9IFtdDQogICAgICAgIGlmIChpbmRleCA9PSAwIHx8IHN0ciA9PSAnTmFOJykNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgdmFyIHN0cmluZyA9ICcnOw0KDQogICAgICAgIC8vZXhwbG9kZSBudW1iZXIgc3RyaW5nIGludG8gYmxvY2tzIG9mIDNudW1iZXJzIGFuZCBwdXNoIHRvIHF1ZXVlDQogICAgICAgIHdoaWxlIChpbmRleCA+PSAwKSB7DQogICAgICAgICAgICBhcnIucHVzaChzdHIuc3Vic3RyaW5nKGluZGV4LCBNYXRoLm1heChpbmRleCAtIDMsIDApKSk7DQogICAgICAgICAgICBpbmRleCAtPSAzOw0KICAgICAgICB9DQoNCiAgICAgICAgLy9sb29wIHRob3VnaCBxdWV1ZSBhbmQgY29udmVydCBlYWNoIGJsb2NrIA0KICAgICAgICBmb3IgKGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgICAgICAgIGlmIChhcnJbaV0gIT0gJycgJiYgYXJyW2ldICE9ICcwMDAnKSB7DQogICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godGhpcy5ibG9ja19vZl90aHJlZShhcnJbaV0pKQ0KICAgICAgICAgICAgICAgIGlmICh1W2ldKQ0KICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh1W2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoY3VycmVuY3kpDQogICAgICAgICAgICByZXN1bHQucHVzaChjdXJyZW5jeSkNCiAgICAgICAgc3RyaW5nID0gcmVzdWx0LmpvaW4oJyAnKQ0KICAgICAgICAvL3JlbW92ZSB1bndhbnRlZCB3aGl0ZSBzcGFjZQ0KICAgICAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoL1swLTldL2csICcnKS5yZXBsYWNlKC8gIC9nLCAnICcpLnJlcGxhY2UoLyAkLywgJycpOw0KDQogICAgfQ0KDQp9DQpleHBvcnQgZGVmYXVsdCBuZXcgTW9uZXlGb3JtYXQoKTsNCg
